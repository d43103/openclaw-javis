ì´ì œ ì•„ì´í°ì— ì•±ì„ ì„¤ì¹˜í•´ë³´ê³  ì‹¶ì–´

---

# Xcode Test Command

<command_purpose>Build, install, and test iOS apps on the simulator using XcodeBuildMCP. Captures screenshots, logs, and verifies app behavior.</command_purpose>

## Introduction

<role>iOS QA Engineer specializing in simulator-based testing</role>

This command tests iOS/macOS apps by:
- Building for simulator
- Installing and launching the app
- Taking screenshots of key screens
- Capturing console logs for errors
- Supporting human verification for external flows

## Prerequisites

<requirements>
- Xcode installed with command-line tools
- XcodeBuildMCP server connected
- Valid Xcode project or workspace
- At least one iOS Simulator available
</requirements>

## Main Tasks

### 0. Verify XcodeBuildMCP is Installed

<check_mcp_installed>

**First, check if XcodeBuildMCP tools are available.**

Try calling:
```
mcp__xcodebuildmcp__list_simulators({})
```

**If the tool is not found or errors:**

Tell the user:
```markdown
**XcodeBuildMCP not installed**

Please install the XcodeBuildMCP server first:

\`\`\`bash
claude mcp add XcodeBuildMCP -- npx xcodebuildmcp@latest
\`\`\`

Then restart Claude Code and run `/xcode-test` again.
```

**Do NOT proceed** until XcodeBuildMCP is confirmed working.

</check_mcp_installed>

### 1. Discover Project and Scheme

<discover_project>

**Find available projects:**
```
mcp__xcodebuildmcp__discover_projs({})
```

**List schemes for the project:**
```
mcp__xcodebuildmcp__list_schemes({ project_path: "/path/to/Project.xcodeproj" })
```

**If argument provided:**
- Use the specified scheme name
- Or "current" to use the default/last-used scheme

</discover_project>

### 2. Boot Simulator

<boot_simulator>

**List available simulators:**
```
mcp__xcodebuildmcp__list_simulators({})
```

**Boot preferred simulator (iPhone 15 Pro recommended):**
```
mcp__xcodebuildmcp__boot_simulator({ simulator_id: "[uuid]" })
```

**Wait for simulator to be ready:**
Check simulator state before proceeding with installation.

</boot_simulator>

### 3. Build the App

<build_app>

**Build for iOS Simulator:**
```
mcp__xcodebuildmcp__build_ios_sim_app({
  project_path: "/path/to/Project.xcodeproj",
  scheme: "[scheme_name]"
})
```

**Handle build failures:**
- Capture build errors
- Create P1 todo for each build error
- Report to user with specific error details

**On success:**
- Note the built app path for installation
- Proceed to installation step

</build_app>

### 4. Install and Launch

<install_launch>

**Install app on simulator:**
```
mcp__xcodebuildmcp__install_app_on_simulator({
  app_path: "/path/to/built/App.app",
  simulator_id: "[uuid]"
})
```

**Launch the app:**
```
mcp__xcodebuildmcp__launch_app_on_simulator({
  bundle_id: "[app.bundle.id]",
  simulator_id: "[uuid]"
})
```

**Start capturing logs:**
```
mcp__xcodebuildmcp__capture_sim_logs({
  simulator_id: "[uuid]",
  bundle_id: "[app.bundle.id]"
})
```

</install_launch>

### 5. Test Key Screens

<test_screens>

For each key screen in the app:

**Take screenshot:**
```
mcp__xcodebuildmcp__take_screenshot({
  simulator_id: "[uuid]",
  filename: "screen-[name].png"
})
```

**Review screenshot for:**
- UI elements rendered correctly
- No error messages visible
- Expected content displayed
- Layout looks correct

**Check logs for errors:**
```
mcp__xcodebuildmcp__get_sim_logs({ simulator_id: "[uuid]" })
```

Look for:
- Crashes
- Exceptions
- Error-level log messages
- Failed network requests

</test_screens>

### 6. Human Verification (When Required)

<human_verification>

Pause for human input when testing touches:

| Flow Type | What to Ask |
|-----------|-------------|
| Sign in with Apple | "Please complete Sign in with Apple on the simulator" |
| Push notifications | "Send a test push and confirm it appears" |
| In-app purchases | "Complete a sandbox purchase" |
| Camera/Photos | "Grant permissions and verify camera works" |
| Location | "Allow location access and verify map updates" |

Use AskUserQuestion:
```markdown
**Human Verification Needed**

This test requires [flow type]. Please:
1. [Action to take on simulator]
2. [What to verify]

Did it work correctly?
1. Yes - continue testing
2. No - describe the issue
```

</human_verification>

### 7. Handle Failures

<failure_handling>

When a test fails:

1. **Document the failure:**
   - Take screenshot of error state
   - Capture console logs
   - Note reproduction steps

2. **Ask user how to proceed:**
   ```markdown
   **Test Failed: [screen/feature]**

   Issue: [description]
   Logs: [relevant error messages]

   How to proceed?
   1. Fix now - I'll help debug and fix
   2. Create todo - Add to todos/ for later
   3. Skip - Continue testing other screens
   ```

3. **If "Fix now":**
   - Investigate the issue in code
   - Propose a fix
   - Rebuild and retest

4. **If "Create todo":**
   - Create `{id}-pending-p1-xcode-{description}.md`
   - Continue testing

</failure_handling>

### 8. Test Summary

<test_summary>

After all tests complete, present summary:

```markdown
## ğŸ“± Xcode Test Results

**Project:** [project name]
**Scheme:** [scheme name]
**Simulator:** [simulator name]

### Build: âœ… Success / âŒ Failed

### Screens Tested: [count]

| Screen | Status | Notes |
|--------|--------|-------|
| Launch | âœ… Pass | |
| Home | âœ… Pass | |
| Settings | âŒ Fail | Crash on tap |
| Profile | â­ï¸ Skip | Requires login |

### Console Errors: [count]
- [List any errors found]

### Human Verifications: [count]
- Sign in with Apple: âœ… Confirmed
- Push notifications: âœ… Confirmed

### Failures: [count]
- Settings screen - crash on navigation

### Created Todos: [count]
- `006-pending-p1-xcode-settings-crash.md`

### Result: [PASS / FAIL / PARTIAL]
```

</test_summary>

### 9. Cleanup

<cleanup>

After testing:

**Stop log capture:**
```
mcp__xcodebuildmcp__stop_log_capture({ simulator_id: "[uuid]" })
```

**Optionally shut down simulator:**
```
mcp__xcodebuildmcp__shutdown_simulator({ simulator_id: "[uuid]" })
```

</cleanup>

## Quick Usage Examples

```bash
# Test with default scheme
/xcode-test

# Test specific scheme
/xcode-test MyApp-Debug

# Test after making changes
/xcode-test current
```

## Integration with /workflows:review

When reviewing PRs that touch iOS code, the `/workflows:review` command can spawn this as a subagent:

```
Task general-purpose("Run /xcode-test for scheme [name]. Build, install on simulator, test key screens, check for crashes.")
```

---

[Request interrupted by user for tool use]

---

openclaw ios ì•±ì„ ì•„ì´í°ì— ì„¤ì¹˜í•´ë³´ê³  ì‹¶ì–´.

---

xcodeë¥¼ ì²˜ìŒì¨ë³´ëŠ”ë° í•˜ë‚˜ì”© ìì„¸íˆ ì•Œë ¤ì¤˜. xcode project ë¥¼ ~/Workspace/opensource/openclaw ìª½ì—ì„œ ì—´ë©´ ë˜ëŠ”ê±´ê°€?

---

ì‘ í”„ë¡œì íŠ¸ ì—´ì—ˆì–´

---

ì—°ê²°í–ˆê³ , signing & capabilities ì— ë“¤ì–´ì™”ì–´.

---

Personal Team ìœ¼ë¡œ ì„ íƒí•˜ë©´ ë˜ë‚˜?

---

ì•„ë‹ˆ ì•ˆë³´ì—¬.

---

Localsigning.xcconfig ì§ì ‘ ë§Œë“¤ì–´ì¤˜

---

[Request interrupted by user]

---

ì•„ë‹ˆ ë‚´ê°€ ë°”ê¾¼ê±°ì•¼. personal team ìœ¼ë¡œ ì§„í–‰í•´ì¤˜

---

ios ì•± ê°œë°œì ë“±ë¡ì€ ìœ ë£Œì¸ê±°ì•¼?

---

1

---

ì‘

---

ì—ëŸ¬ë‚˜ëŠ”ë°?

---

The file â€œ.swiftlint.ymlâ€ couldnâ€™t be opened because you donâ€™t have permission to view it.

---

The file â€œ.swiftlint.ymlâ€ couldnâ€™t be opened because you donâ€™t have permission to view it.

---

ì—ëŸ¬ í™•ì¸í•´ì¤˜

---

Embedded binary's bundle identifier is not prefixed with the parent app's bundle identifier.
 bundle identifier ë¥¼ ai.openclaw.ios.d43103local ë¡œ ë³€ê²½í–ˆì—ˆì–´. ë‹¤ì‹œ ì›ë³µí•´ì•¼í•˜ë‚˜?

---

/Users/d43103/Workspace/opensource/openclaw/apps/ios/OpenClaw.xcodeproj Communication with Apple failed. Your maximum App ID limit has been reached. You may create up to 10 App IDs every 7 days.

---

/Users/d43103/Workspace/opensource/openclaw/apps/ios/OpenClaw.xcodeproj No profiles for 'ai.openclaw.ios.local' were found: Xcode couldn't find any iOS App Development provisioning profiles matching 'ai.openclaw.ios.local'.

---

[Request interrupted by user]

---

ìœ ë£Œë¡œ ë³€ê²½í•˜ë ¤ë©´? ì €ê±°ëŠ” íšŒì‚¬ íŒ€ì´ë¼ ì‚¬ìš©í•˜ë©´ ì•ˆë¼

---

2

---

ë©¤ë²„ì‰½ ê°±ì‹ í•˜ë©´ ë˜ë‚˜? 129,000 ì›ì´ë˜ë°